<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Challenges and Opportunities in NLP Benchmarking</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css?v=eeb099b72b" />

    <meta name="description" content="Recent NLP models have outpaced the benchmarks to test for them. This post provides an overview of challenges and opportunities for NLP benchmarks." />
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="https://ruder.io/nlp-benchmarking/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://ruder.io/nlp-benchmarking/amp/" />
    
    <meta property="og:site_name" content="Sebastian Ruder" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Challenges and Opportunities in NLP Benchmarking" />
    <meta property="og:description" content="Recent NLP models have outpaced the benchmarks to test for them. This post provides an overview of challenges and opportunities for NLP benchmarks." />
    <meta property="og:url" content="https://ruder.io/nlp-benchmarking/" />
    <meta property="og:image" content="https://ruder.io/content/images/2021/08/squad_2_progress.png" />
    <meta property="article:published_time" content="2021-08-23T09:00:00.000Z" />
    <meta property="article:modified_time" content="2021-08-23T15:45:06.000Z" />
    <meta property="article:tag" content="natural language processing" />
    <meta property="article:tag" content="transfer learning" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Challenges and Opportunities in NLP Benchmarking" />
    <meta name="twitter:description" content="Recent NLP models have outpaced the benchmarks to test for them. This post provides an overview of challenges and opportunities for NLP benchmarks." />
    <meta name="twitter:url" content="https://ruder.io/nlp-benchmarking/" />
    <meta name="twitter:image" content="https://ruder.io/content/images/2021/08/squad_2_progress.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Sebastian Ruder" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="natural language processing, transfer learning" />
    <meta name="twitter:site" content="@seb_ruder" />
    <meta property="og:image:width" content="1162" />
    <meta property="og:image:height" content="499" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Sebastian Ruder",
        "url": "https://ruder.io/",
        "logo": {
            "@type": "ImageObject",
            "url": {
                "@type": "ImageObject",
                "url": "https://ruder.io/favicon.ico",
                "width": 48,
                "height": 48
            }
        }
    },
    "author": {
        "@type": "Person",
        "name": "Sebastian Ruder",
        "image": {
            "@type": "ImageObject",
            "url": "https://ruder.io/content/images/2019/02/new_profile_photo_square-1.jpg",
            "width": 2000,
            "height": 2000
        },
        "url": "https://ruder.io/author/sebastian/",
        "sameAs": []
    },
    "headline": "Challenges and Opportunities in NLP Benchmarking",
    "url": "https://ruder.io/nlp-benchmarking/",
    "datePublished": "2021-08-23T09:00:00.000Z",
    "dateModified": "2021-08-23T15:45:06.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://ruder.io/content/images/2021/08/squad_2_progress.png",
        "width": 1162,
        "height": 499
    },
    "keywords": "natural language processing, transfer learning",
    "description": "Over the last years, models in NLP have become much more powerful, driven by \nadvances in transfer learning\n[https://docs.google.com/presentation/d/1fIhGikFPnb7G5kr58OvYC3GN4io7MznnM0aAgadvJfc/edit?usp&#x3D;sharing]\n. A consequence of this drastic increase in performance is that existing\nbenchmarks have been left behind. Recent models &quot;have outpaced the benchmarks to\ntest for them&quot; (AI Index Report 2021\n[https://aiindex.stanford.edu/wp-content/uploads/2021/03/2021-AI-Index-Report_Master.pdf#page&#x3D;11]\n",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://ruder.io/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.11" />
    <link rel="alternate" type="application/rss+xml" title="Sebastian Ruder" href="https://ruder.io/rss/" />
    <script>
var profile_title = 'Sebastian Ruder';
</script>
<script>
var disqus_shortname = 'sebastianruder';
</script>
<script>
var profile_resume ='NLP PhD student';
</script>
<script>
var ga_id = 'UA-60512592-1';
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]],
        processEscapes: true
    }
});
</script>

</head>
<body class="post-template tag-natural-language-processing tag-transfer-learning">

    <div class="site-wrapper">

        

<header class="site-header">
    <div class="outer site-nav-main">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left-wrapper">
        <div class="site-nav-left">
                <a class="site-nav-logo" href="https://ruder.io">Sebastian Ruder</a>
            <div class="site-nav-content">
                    <ul class="nav" role="menu">
    <li class="nav-about" role="menuitem"><a href="https://ruder.io/about/">About</a></li>
    <li class="nav-tags" role="menuitem"><a href="https://ruder.io/tags/">Tags</a></li>
    <li class="nav-papers" role="menuitem"><a href="https://ruder.io/publications/">Papers</a></li>
    <li class="nav-talks" role="menuitem"><a href="https://ruder.io/talks/">Talks</a></li>
    <li class="nav-news" role="menuitem"><a href="https://ruder.io/news/">News</a></li>
    <li class="nav-faq" role="menuitem"><a href="https://ruder.io/faq/">FAQ</a></li>
    <li class="nav-newsletter" role="menuitem"><a href="https://ruder.io/nlp-news/">Newsletter</a></li>
    <li class="nav-nlp-progress" role="menuitem"><a href="https://nlpprogress.com/">NLP Progress</a></li>
    <li class="nav-media" role="menuitem"><a href="https://ruder.io/media/">Media</a></li>
    <li class="nav-contact" role="menuitem"><a href="https://ruder.io/contact/">Contact</a></li>
</ul>

                    <span class="nav-post-title dash">Challenges and Opportunities in NLP Benchmarking</span>
            </div>
        </div>
    </div>
    <div class="site-nav-right">
            <div class="social-links">
                    <a class="social-link social-link-tw" href="https://twitter.com/seb_ruder" title="Twitter" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            </div>
                <a class="rss-button" href="https://ruder.io/rss/index.rss" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
</a>

    </div>
</nav>
    </div>
</div></header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-natural-language-processing tag-transfer-learning ">

            <header class="post-full-header">

                <section class="post-full-tags">
                    <a href="../tag/natural-language-processing/index.html">natural language processing</a>
                </section>

                <h1 class="post-full-title">Challenges and Opportunities in NLP Benchmarking</h1>


                <div class="post-full-byline">

                    <section class="post-full-byline-content">

                        <ul class="author-list">
                            <li class="author-list-item">

                                <div class="author-card">
                                    <img class="author-profile-image" src="../content/images/size/w100/2019/02/new_profile_photo_square-1.jpg" alt="Sebastian Ruder" />
                                    <div class="author-info">
                                        <h2>Sebastian Ruder</h2>
                                        <p>Read <a href="../author/sebastian/index.html">more posts</a> by this author.</p>
                                    </div>
                                </div>

                                <a href="../author/sebastian/index.html" class="author-avatar">
                                    <img class="author-profile-image" src="../content/images/size/w100/2019/02/new_profile_photo_square-1.jpg" alt="Sebastian Ruder" />
                                </a>

                            </li>
                        </ul>

                        <section class="post-full-byline-meta">
                            <h4 class="author-name"><a href="../author/sebastian/index.html">Sebastian Ruder</a></h4>
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2021-08-23">23 Aug 2021</time>
                                <span class="byline-reading-time"><span class="bull">&bull;</span> 16 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="../content/images/size/w300/2021/08/squad_2_progress.png 300w,
                           ../content/images/size/w600/2021/08/squad_2_progress.png 600w,
                          ../content/images/size/w1000/2021/08/squad_2_progress.png 1000w,
                         ../content/images/size/w2000/2021/08/squad_2_progress.png 2000w"
                    sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px"
                    src="../content/images/size/w2000/2021/08/squad_2_progress.png"
                    alt="Challenges and Opportunities in NLP Benchmarking"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>Over the last years, models in NLP have become much more powerful, driven by <a href="https://docs.google.com/presentation/d/1fIhGikFPnb7G5kr58OvYC3GN4io7MznnM0aAgadvJfc/edit?usp=sharing">advances in transfer learning</a>. A consequence of this drastic increase in performance is that existing benchmarks have been left behind. Recent models "have outpaced the benchmarks to test for them" (<a href="https://aiindex.stanford.edu/wp-content/uploads/2021/03/2021-AI-Index-Report_Master.pdf#page=11">AI Index Report 2021</a>), quickly reaching super-human performance on standard benchmarks such as <a href="https://super.gluebenchmark.com/">SuperGLUE</a> and <a href="https://rajpurkar.github.io/SQuAD-explorer/">SQuAD</a>. Does this mean that we have solved natural language processing? Far from it.</p><p>However, the traditional practices for evaluating performance of NLP models, using a single metric such as accuracy or BLEU, relying on static benchmarks and abstract task formulations no longer work as well in light of models' surprisingly robust <em>superficial</em> natural language understanding ability. We thus need to rethink how we design our benchmarks and evaluate our models so that they can still serve as useful indicators of progress going forward.</p><p>This post aims to give an overview of challenges and opportunities in benchmarking in NLP, together with some general recommendations. I tried to cover perspectives from recent papers, talks at ACL 2021 as well as at the <a href="https://github.com/kwchurch/Benchmarking_past_present_future">ACL 2021 Workshop on Benchmarking: Past, Present and Future</a>, in addition to some of my own thoughts. </p><p><em>Header image: Performance on <a href="https://rajpurkar.github.io/SQuAD-explorer/">SQuAD 2.0</a> over time (Credit: <a href="https://paperswithcode.com/sota/question-answering-on-squad20">Papers with Code</a>)</em></p><p>Table of contents:</p><ul><li><a href="index.html#what-is-a-benchmark">What is a benchmark?</a></li><li><a href="index.html#a-brief-history-of-benchmarking">A brief history of benchmarking</a></li><li><a href="index.html#metrics-matter">Metrics matter</a></li><li><a href="index.html#consider-the-downstream-use-case">Consider the downstream use case</a></li><li><a href="index.html#fine-grained-evaluation">Fine-grained evaluation</a></li><li><a href="index.html#the-long-tail-of-benchmark-performance">The long tail of benchmark performance</a></li><li><a href="index.html#large-scale-continuous-evaluation">Large-scale continuous evaluation</a></li></ul><h2 id="what-is-a-benchmark">What is a benchmark?</h2><blockquote><em>"Datasets are the telescopes of our field."</em>—<a href="https://youtu.be/t_A36DDcG_0?t=964">Aravind Joshi</a></blockquote><p>The original use of the term refers to horizontal marks made by <a href="https://en.wikipedia.org/wiki/Surveying">surveyors</a> in stone structures, into which an angle-iron could be placed to form a "bench" for a <a href="https://en.wikipedia.org/wiki/Level_staff">leveling rod</a>. Figuratively, a benchmark refers to a standard point of reference against which things can be compared. A benchmark as it is used in ML or NLP typically has several components: it consists of one or multiple datasets, one or multiple associated metrics, and a way to aggregate performance.</p><p>A benchmark sets a standard for assessing the performance of different systems that is agreed upon by the community. To ensure that a benchmark is accepted by the community, many recent benchmarks either select a representative set of standard tasks, such as <a href="https://gluebenchmark.com/">GLUE</a> or <a href="https://github.com/google-research/xtreme">XTREME</a> or actively solicit task proposals from the community, such as <a href="https://super.gluebenchmark.com/">SuperGLUE</a>, <a href="https://gem-benchmark.com/">GEM</a>, or <a href="https://github.com/google/BIG-bench">BIG-Bench</a>.</p><p>For people in the field, benchmarks are crucial tools to track progress. <a href="https://www.youtube.com/watch?t=964&amp;v=t_A36DDcG_0&amp;feature=youtu.be">Aravind Joshi</a> said that without benchmarks to assess the performance of our models, we are just like "astronomers wanting to see the stars but refusing to build telescopes".</p><p>For practitioners and outsiders, benchmarks provide an objective lens into a field that enables them to identify useful models and keep track of a field's progress. For instance, the <a href="https://aiindex.stanford.edu/wp-content/uploads/2021/03/2021-AI-Index-Report_Master.pdf#page=62">AI Index Report 2021</a> uses SuperGLUE and SQuAD as a proxy for overall progress in natural language processing.</p><p>Reaching human performance on influential benchmarks is often seen as a key milestone for a field. AlphaFold 2 reaching performance competitive with experimental methods on the CASP 14 competition marked a <a href="https://deepmind.com/blog/article/alphafold-a-solution-to-a-50-year-old-grand-challenge-in-biology">major scientific advance in the field of structural biology</a>.</p><h2 id="a-brief-history-of-benchmarking">A brief history of benchmarking</h2><blockquote><em>"Creating good benchmarks is harder than most imagine."</em>—John R. Mashey; foreword to <a href="https://www.springer.com/gp/book/9783030417048">Systems Benchmarking (2020)</a></blockquote><p>Benchmarks have a long history of being used to assess the <a href="https://en.wikipedia.org/wiki/Benchmark_(computing)">performance of computational systems</a>. The Standard Performance Evaluation Corporation (<a href="https://en.wikipedia.org/wiki/Standard_Performance_Evaluation_Corporation">SPEC</a>), established in 1988 is one of the oldest organisations dedicated to benchmarking the performance of computer hardware. Crucially, SPEC had support from most important companies in the field. Every year, it would release different benchmark sets, each composed of multiple programs, with performance measured as the <a href="https://en.wikipedia.org/wiki/Geometric_mean">geometric mean</a> of millions of instructions per second (<a href="https://en.wikipedia.org/wiki/Instructions_per_second">MIPS</a>).</p><p>A recent ML-specific analogue to SPEC is <a href="https://mlcommons.org/en/">MLCommons</a>, which organises the <a href="https://mlcommons.org/en/training-normal-10/">MLPerf</a> series of performance benchmarks focusing on model training and inference. Similar to SPEC, MLPerf has a broad base of support from academia and industry, building on previous individual efforts for measuring performance such as <a href="https://github.com/baidu-research/DeepBench">DeepBench</a> by Baidu or <a href="https://dawn.cs.stanford.edu/benchmark/">DAWNBench</a> by Stanford. </p><p>For US agencies such as <a href="https://en.wikipedia.org/wiki/DARPA">DARPA</a> and <a href="https://en.wikipedia.org/wiki/National_Institute_of_Standards_and_Technology">NIST</a>, benchmarks played a crucial role in measuring and tracking scientific progress. Early benchmarks for automatic speech recognition (ASR) such as <a href="https://en.wikipedia.org/wiki/TIMIT">TIMIT</a> and <a href="https://catalog.ldc.upenn.edu/LDC97S62">Switchboard</a> were funded by DARPA and coordinated by <a href="https://en.wikipedia.org/wiki/National_Institute_of_Standards_and_Technology">NIST</a> starting in 1986. Later influential benchmarks in other areas of ML such as <a href="https://en.wikipedia.org/wiki/MNIST_database">MNIST</a> were also based on NIST data. </p><p>For language technology and information retrieval (IR), NIST ran the DARPA-funded <a href="https://en.wikipedia.org/wiki/Text_Retrieval_Conference">TREC</a> series of workshops covering a wide array of tracks and topics, which can be seen below. TREC organised competitions built on an evaluation paradigm pioneered by <a href="https://en.wikipedia.org/wiki/Cranfield_experiments">Cranfield</a> in the 1960s where models are evaluated based on a set of test collections, consisting of documents, questions, and human relevance judgements. As the variance in performance across topics is large, scores are averaged over many topics. TREC's "standard, widely available, and carefully constructed set of data laid the groundwork for further innovation" (<a href="https://googleblog.blogspot.com/2008/03/why-data-matters.html">Varian, 2008</a>) in IR.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://ruder.io/content/images/2021/08/trec_series.png" class="kg-image"><figcaption>Tasks and topics in the TREC workshops from 1992–2020 (Credit: <a href="https://www.nist.gov/video/coopetition-ir-research-presented-ellen-voorhees">Ellen Voorhees</a>)</figcaption></figure><p>Many recent influential benchmarks such as <a href="https://en.wikipedia.org/wiki/ImageNet">ImageNet</a>, <a href="https://rajpurkar.github.io/SQuAD-explorer/">SQuAD</a>, or <a href="https://aclanthology.org/D15-1075/">SNLI</a> are large in scale, consisting of hundreds of thousands of examples and were developed by academic groups at well-funded universities. In the era of deep learning, such large-scale datasets have been credited as one of the pillars driving progress in research, with fields such as NLP or <a href="https://twitter.com/OriolVinyalsML/status/1333436710303264772?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1333436710303264772%7Ctwgr%5E%7Ctwcon%5Es1_c10&amp;ref_url=https%3A%2F%2Fsyncedreview.com%2F2020%2F11%2F30%2Fbiologys-imagenet-moment-deepmind-says-its-alphafold-has-cracked-a-50-year-old-biology-challenge%2F">biology</a> witnessing their <a href="https://thegradient.pub/nlp-imagenet/">'ImageNet moment'</a>. </p><p>As models have become more powerful and general-purpose, benchmarks have become more application-oriented and increasingly moved from single-task to multi-task and single-domain to multi-domain benchmarks. Key examples of these trends are a transition from a focus on core linguistic tasks such as <a href="http://nlpprogress.com/english/part-of-speech_tagging.html">part-of-speech tagging</a> and <a href="http://nlpprogress.com/english/dependency_parsing.html">dependency parsing</a> to tasks that are closer to the real-world such as goal-oriented dialogue and open-domain question answering (<a href="https://research.google/pubs/pub47761/">Kwiatkowski et al., 2019</a>); the emergence of multi-task datasets such as <a href="https://gluebenchmark.com/">GLUE</a>; and multi-modality datasets such as <a href="https://wilds.stanford.edu/">WILDS</a>.</p><p>However, while it took more than 15 years to achieve superhuman performance on classic benchmarks such as MNIST or Switchboard, models have achieved superhuman performance on more recent benchmarks such as GLUE and SQuAD 2.0 within about a year of their release, as can be seen in the figure below. At the same time, we know that the capabilities that these benchmarks aim to test, such as general question answering are far from being solved.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://ruder.io/content/images/2021/08/dynabench_plot.png" class="kg-image"><figcaption>Benchmark saturation over time for popular benchmarks. Initial performance and human performance are normalised to -1 and 0 respectively (<a href="https://aclanthology.org/2021.naacl-main.324.pdf">Kiela et al., 2021</a>).</figcaption></figure><p>Another factor that has contributed to the saturation of these benchmarks is that limitations and annotation artefacts of recent datasets have been identified much more quickly compared to earlier benchmarks. In SNLI, annotators have been shown to rely on heuristics, which allow models to make the correct prediction in many cases using the hypothesis alone (<a href="https://aclanthology.org/N18-2017.pdf">Gururangan et al., 2018</a>) while models trained on SQuAD are subject to adversarially inserted sentences (<a href="https://aclanthology.org/D17-1215/">Jia and Liang, 2017</a>).</p><p>A recent trend is the development of adversarial datasets such as Adversarial NLI (<a href="https://aclanthology.org/2020.acl-main.441/">Nie et al., 2020</a>), Beat the AI (<a href="https://aclanthology.org/2020.tacl-1.43.pdf">Bartolo et al., 2020</a>), and others where examples are created to be difficult for current models. <a href="https://dynabench.org/">Dynabench</a> (<a href="https://aclanthology.org/2021.naacl-main.324.pdf">Kiela et al., 2021</a>), a recent open-source platform has been designed to facilitate the creation of such datasets. A benefit of such benchmarks is that they can be dynamically updated to be challenging as new models emerge and consequently do not saturate as easily as static benchmarks.</p><h2 id="metrics-matter">Metrics matter</h2><blockquote><em>"When you can measure what you are speaking of and express it in numbers, you know that on which you are discussing. But when you cannot measure it and express it in numbers, your knowledge is of a very meagre and unsatisfactory kind."</em>—Lord Kelvin</blockquote><p>When it comes to measuring performance, metrics play an important and often under-appreciated role. For classification tasks, accuracy or <a href="https://en.wikipedia.org/wiki/F-score">F-score</a> metrics may seem like the obvious choice but—depending on the application—different types of errors incur different costs. For fine-grained sentiment analysis, confusing between <em>positive</em> and <em>very positive</em> may not be problematic while mixing up <em>very positive</em> and <em>very negative</em> is. Chris Potts highlights an <a href="https://youtu.be/t_A36DDcG_0?t=1824">array of practical examples</a> where metrics like F-score fall short, many in scenarios where errors are much more costly.</p><!--kg-card-begin: markdown--><p>Designing a good metric requires domain expertise. <a href="https://mlcommons.org/en/training-normal-10/">MLPerf</a> measures the wallclock time required to train a model to a dataset-specific performance target, a measure informed by both end use cases and the difficulty to compare other efficiency metrics such as FLOPS across models. In ASR, only the percentage of correctly transcribed words (akin to accuracy) was initially used as the metric. The community later settled on <a href="https://en.wikipedia.org/wiki/Word_error_rate">word error rate</a>, i.e. $\frac{\text{substitutions} + \text{deletions} + \text{insertions}}{\text{number of words in reference}}$ as it directly reflects the cost of correcting transcription errors.</p>
<!--kg-card-end: markdown--><p>There is a large difference between metrics designed for decades-long research and metrics designed for near-term development of practical applications, as highlighted by <a href="https://youtu.be/a-ukPup8gKw?t=770">Mark Liberman</a>. For developing decade-scale technology, we need efficient metrics that can be crude as long as they point in the general direction of our distant goal. Examples of such metrics are the word error rate in ASR (which assumes that all words are equally important) and BLEU in machine translation (which assumes that word order is not important). In contrast, for the evaluation of practical technology we need metrics that are designed with the requirements of specific applications in mind and that can consider different types of error classes.</p><p>The rapid increase in model performance in recent years has catapulted us from the decade-long to the near-term regime for many applications. However, even in this more application-oriented setting we are still relying on the same metrics that we have used to measure long-term research progress thus far. In a recent meta-analysis, <a href="https://aclanthology.org/2021.acl-long.566.pdf">Marie et al. (2021)</a> found that 82% papers of machine translation (MT) papers between 2019–2020 only evaluate on BLEU—despite 108 alternative metrics having been proposed for MT evaluation in the last decade, many of which correlate better with human judgements. As models become stronger, metrics like BLEU are no longer able to accurately identify and compare the best-performing models.</p><p>While evaluation of natural language generation (NLG) models is notoriously difficult, standard n-gram overlap-based metrics such as ROUGE or BLEU are furthermore less suited to languages with rich morphology, which will be assigned relatively lower scores.</p><p>A recent trend in NLG is towards the development of automatic metrics such as BERTScore (<a href="https://openreview.net/forum?id=SkeHuCVFDr">Zhang et al., 2020</a>) that leverage the power of large pre-trained models. A recent modification of this method makes it more suitable for near-term MT evaluation by assigning larger weights to more difficult tokens, i.e. tokens that are translated correctly only by few MT systems (<a href="https://aclanthology.org/2021.acl-short.5.pdf">Zhan et al., 2021</a>).</p><p>In order to continue to make progress, we need to be able to update and refine our metrics, to replace efficient simplified metrics with application-specific ones. The recent <a href="https://gem-benchmark.com/">GEM benchmark</a>, for instance, explicitly includes <a href="https://github.com/GEM-benchmark/GEM-metrics">metrics</a> as a component that should be improved over time, as can be seen below.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://ruder.io/content/images/2021/08/opportunities_of_benchmarks.png" class="kg-image"><figcaption>Opportunities (circle) and challenges of benchmark evaluation (<a href="https://aclanthology.org/2021.gem-1.10.pdf">Gehrmann et al., 2021</a>).</figcaption></figure><p><strong>Recommendations:</strong></p><ol><li>Consider metrics that are better suited to the downstream task and language.</li><li>Consider metrics that highlight the trade-offs of the downstream setting.</li><li>Update and refine metrics over time.</li></ol><h2 id="consider-the-downstream-use-case">Consider the downstream use case</h2><blockquote><em>"[...] benchmarks shape a field, for better or worse. Good benchmarks are in alignment with real applications, but bad benchmarks are not, forcing engineers to choose between making changes that help end users or making changes that only help with marketing."</em>—David A. Patterson; foreword to <a href="https://www.springer.com/gp/book/9783030417048">Systems Benchmarking (2020)</a></blockquote><p>NLP technology is increasingly used in many real-world application areas, <a href="https://youtu.be/t_A36DDcG_0?t=278">from creative self-expression to fraud detection and recommendation</a>. It is thus key to design benchmarks with such real-world settings in mind. </p><p>A benchmark's data composition and evaluation protocol should reflect the real-world use case, as highlighted by <a href="https://youtu.be/Jb6G25ZJ-VU?t=307">Ido Dagan</a>. For relation classification, for instance, the <a href="https://aclanthology.org/D18-1514/">FewRel</a> dataset <a href="https://youtu.be/Jb6G25ZJ-VU?t=657">lacks some important realistic properties</a>, which <a href="https://arxiv.org/abs/2104.08481">Few-shot TACRED</a> addresses. For binary sentiment classification on the <a href="https://ai.stanford.edu/~ang/papers/acl11-WordVectorsSentimentAnalysis.pdf">IMDb dataset</a>, only highly polarised positive and negative reviews are considered and labels are exactly balanced. In information retrieval, retrieving relevant before non-relevant documents is <a href="https://www.nist.gov/video/coopetition-ir-research-presented-ellen-voorhees">necessary <em>but not sufficient</em> for real-world usage</a>.</p><p>As a first rule of social responsibility for NLP, <a href="https://youtu.be/t_A36DDcG_0?t=661">Chris Potts proposes</a> "Do exactly what you said you would do". As researchers in the field, we should communicate clearly what performance on a benchmark reflects and how this corresponds to real-world settings. In a similar vein, <a href="https://aclanthology.org/2021.naacl-main.385.pdf">Bowman and Dahl (2021)</a> argue that good performance on a benchmark should imply robust in-domain performance on the task. </p><p>However, the real-world application of a task may confront the model with data different from its training distribution. It is thus key to assess the robustness of the model and how well it generalises to such out-of-distribution data, including data with a temporal shift and data from other language varieties.</p><p>In light of the limited linguistic diversity in NLP research (<a href="https://aclanthology.org/2020.acl-main.560/">Joshi et al., 2020</a>), it is furthermore crucial not to treat English as the singular language for evaluation. When designing a benchmark, collecting—at a minimum—test data in other languages may help to highlight new challenges and promote language inclusion. Similarly, when evaluating models, leveraging the increasing number of non-English language datasets in tasks such as <a href="https://nlpprogress.com/">question answering</a> and summarisation (<a href="https://aclanthology.org/2021.findings-acl.413/">Hasan et al., 2021</a>) can provide additional evidence of a model's versatility.</p><p>Ultimately, considering the challenges of current and future real-world applications of language technology may provide inspiration for many new evaluations and benchmarks. Benchmarks are among the most impactful artefacts of our field and often lead to entirely new research directions, so it is crucial for them to reflect real-world and potentially ambitious use cases of our technology.</p><p><strong>Recommendations:</strong></p><ol><li>Design the benchmark and its evaluation so that it reflects the real-world use case.</li><li>Evaluate in-domain and out-of-domain generalisation.</li><li>Collect data and evaluate models on other languages.</li><li>Take inspiration from real-world applications of language technology.</li></ol><h2 id="fine-grained-evaluation">Fine-grained evaluation</h2><blockquote><em>"No matter how much people want performance to be a single number, even the <strong>right</strong> mean with no distribution can be misleading, and the <strong>wrong</strong> mean certainly is no better."</em>—John R. Mashey</blockquote><p>The downstream use case of technology should also inform the metrics we use for evaluation. In particular, for downstream applications often not a single metric but an array of constraints need to be considered. Rada Mihalcea <a href="https://youtu.be/FXCSWvIsdEE?t=1226">calls for moving away from just focusing on accuracy</a> and to focus on other important aspects of real-world scenarios. What is important in a particular setting, in other words, the utility of an NLP system, ultimately depends on the requirements of each individual user (<a href="https://aclanthology.org/2020.emnlp-main.393/">Ethayarajh and Jurafsky, 2020</a>). </p><p>Societal needs have generally not been emphasised in machine learning research (<a href="https://arxiv.org/abs/2106.15590">Birhane et al., 2021</a>). However, for real-world applications it is particularly crucial that a model does not exhibit any harmful social biases. Testing for such biases in a task-specific manner should thus become a standard part of algorithm development and model evaluation.</p><p>Another aspect that is important for practical applications is efficiency. Depending on the application, this can relate to both sample efficiency, <a href="https://en.wikipedia.org/wiki/FLOPS">FLOPS</a>, and memory constraints. Evaluating models in resource-constrained settings can often lead to new research directions. For instance, the EfficientQA competition (<a href="https://arxiv.org/abs/2101.00133">Min et al., 2020</a>) at NeurIPS 2020 demonstrated the benefits of <a href="https://ruder.io/research-highlights-2020/#2-retrieval-augmentation">retrieval augmentation</a> and large collections of weakly supervised question–answer pairs (<a href="https://arxiv.org/abs/2102.07033">Lewis et al., 2021</a>).</p><p>In order to better understand the strengths and weaknesses of our models, we furthermore require more fine-grained evaluation across a <em>single</em> metric, highlighting on what types of examples models excel and fail at. <a href="http://explainaboard.nlpedia.ai/">ExplainaBoard</a> (<a href="https://aclanthology.org/2021.acl-demo.34/">Liu et al., 2021</a>) implements such a fine-grained breakdown of model performance across different tasks, which can be seen below. Another way to obtain a more fine-grained estimate of model performance is to create test cases for specific phenomena and model behaviour, for instance using the CheckList framework (<a href="https://aclanthology.org/2020.acl-main.442/">Ribeiro et al., 2020</a>).</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://ruder.io/content/images/2021/08/explainaboard_leaderboard-1.png" class="kg-image"><figcaption>The <a href="http://explainaboard.nlpedia.ai/leaderboard/task-ner/index.php">ExplainaBoard interface for the CoNLL-2003 NER dataset</a> for the three best systems including single-system analyses for the best system (A), pairwise analysis results for the top-2 systems (B), a common error table (C), and combined results (D) (<a href="https://aclanthology.org/2021.acl-demo.34.pdf">Liu et al., 2021</a>).</figcaption></figure><!--kg-card-begin: markdown--><p>As individual metrics can be flawed, it is key to evaluate across multiple metrics. When evaluating on multiple metrics, scores are typically averaged to obtain a single score. A single score is useful to compare models at a glance and provides people outside the community a clear way to assess model performance. However, using the arithmetic mean is not appropriate for all purposes. SPEC used the geometric mean, $\sqrt[\leftroot{-2}\uproot{2}n]{x_1 x_2 \ldots x_n}$, which is useful when aggregating values that are exponential in nature, such as runtimes.</p>
<!--kg-card-end: markdown--><p>An alternative is to use a weighted sum and to enable the user to define their own weights for each component. <a href="https://dynabench.org/">DynaBench</a> uses such a dynamic weighting to weight the importance of model performance but also consider model throughput, memory consumption, fairness, and robustness, which enables users to effectively define their own leaderboard (<a href="https://aclanthology.org/2020.emnlp-main.393/">Ethayarajh and Jurafsky, 2020</a>), as can be seen below.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://ruder.io/content/images/2021/08/dynabench_weighting.png" class="kg-image"><figcaption>Dynamic metric weighting in the <a href="https://dynabench.org/tasks/nli">DynaBench natural language inference task leaderboard</a></figcaption></figure><p><strong>Recommendations:</strong></p><ol><li>Move away from using a single metric for performance evaluation.</li><li>Evaluate social bias and efficiency.</li><li>Perform a fine-grained evaluation of models.</li><li>Consider how to aggregate multiple metrics. </li></ol><h2 id="the-long-tail-of-benchmark-performance">The long tail of benchmark performance</h2><p>Given that current models perform surprisingly well on in-distribution examples, it is time to shift our attention to the tail of the distribution, to outliers and atypical examples. Rather than considering only the average case, we should care more about the worst case and subsets of our data where our models perform the worst.</p><p>As models become more powerful, the fraction of examples where the performance of models differs and that thus will be able to differentiate between strong and the best models will grow smaller. To ensure that evaluation on this long tail of examples is reliable, benchmarks need to be large enough so that small differences in performance can be detected. It is important to note that larger models are not uniformly better across all examples (<a href="https://aclanthology.org/2021.findings-acl.334.pdf">Zhong et al., 2021</a>).</p><p>As an alternative, we can develop mechanisms that allow us to identify the best systems with few examples. This is particularly crucial in settings where assessing performance of many systems is expensive, such as in human evaluation for natural language generation. <a href="https://aclanthology.org/2021.acl-long.242/">Mendonça et al. (2021)</a> frame this as an online learning problem in the context of MT.</p><p>Benchmarks can also focus on annotating examples that are much more challenging. This is the direction taken by recent adversarial benchmarks (<a href="https://aclanthology.org/2021.naacl-main.324.pdf">Kiela et al., 2021</a>). Such benchmarks, as long as they are not biased towards a specific model, can be a useful complement to regular benchmarks that sample from the natural distribution. These directions benefit from the development of <em>active </em>evaluation methods to identify or generate the most salient and discriminative examples to assess model performance as well as interpretability methods to allow annotators to better understand models' decision boundaries.</p><p>As the budget (and thus size) of benchmarks generally remains constant, statistical significance testing becomes even more important as it enables us to reliably detect qualitatively relevant performance differences between systems. </p><p>In order to perform reliable comparisons, the benchmark's annotations should be correct and reliable. However, as models become more powerful, many instances of what look like model errors may be genuine examples of ambiguity in the data. <a href="https://aclanthology.org/2021.naacl-main.385.pdf">Bowman and Dahl (2021)</a> highlight how a model may exploit clues about such disagreements to reach super-human performance on a benchmark.</p><p>If possible, benchmarks should aim to collect multiple annotations to identify ambiguous examples. Such information may provide a useful learning signal (<a href="https://aclanthology.org/P14-2083.pdf">Plank et al., 2014</a>) and can be helpful for error analysis. In light of such ambiguity, it is even more important to report standard metrics such as inter-annotator agreement as this provides a ceiling for a model's performance on a benchmark.</p><p><strong>Recommendations:</strong></p><ol><li>Include many and/or hard examples in the benchmark.</li><li>Conduct statistical significance testing.</li><li>Collect multiple annotations for ambiguous examples.</li><li>Report inter-annotator agreement.</li></ol><h2 id="large-scale-continuous-evaluation">Large-scale continuous evaluation</h2><blockquote><em>"When a measure becomes a target, it ceases to be a good measure."</em>—Goodhart's law</blockquote><p>Multi-task benchmarks such as GLUE have become key indicators of progress but such static benchmark collections quickly become outdated. Modelling advances generally also do not lead to uniform progress across tasks. While models have achieved super-human performance on most GLUE tasks, a gap to 5-way human agreement remains on some tasks such as CoLA (<a href="https://aclanthology.org/P19-1449.pdf">Nangia and Bowman, 2019</a>). On <a href="https://sites.research.google/xtreme/">XTREME</a>, models have improved much more on cross-lingual retrieval.</p><p>In light of the fast pace of model improvements, we are in need of more nimble mechanisms for model evaluation. Specifically, beyond dynamic <em>single-task</em> evaluations such as <a href="https://dynabench.org/">DynaBench</a>, it would be useful to define a dynamic <em>collection</em> of benchmark datasets on which models have not reached human performance. This collection should be managed by the community, with datasets removed or down-weighted as models reach human performance and new challenging datasets being regularly added. Such a collection needs to be versioned, to enable updates beyond the cycle of academic review and to enable replicability and comparison to prior approaches.</p><p>Existing multi-task benchmarks such as <a href="https://gem-benchmark.com/">GEM</a> (<a href="https://arxiv.org/abs/2102.01672">Gehrmann et al., 2021</a>), which explicitly aims to be a 'living' benchmark, generally include around 10–15 different tasks. Rather than limiting the benchmark to a small collection of representative tasks, in light of the number of new datasets constantly being released, it might be more useful to include a larger cross-section of NLP tasks. Given the diverse nature of tasks in NLP, this would provide a more robust and up-to-date evaluation of model performance. <a href="https://www.luge.ai/">LUGE</a> by Baidu is a step towards such a large collection of tasks for Chinese natural language processing, currently consisting of 28 datasets.</p><p>The collection of tasks can be broken down in various ways, providing more a fine-grained assessment of model capabilities. Such a breakdown may be particularly insightful if tasks or subsets of task data are categorised according to the behaviour they are testing. <a href="https://github.com/google/BIG-bench">BIG-Bench</a>, a recent collaborative benchmark for language model probing includes a <a href="https://github.com/google/BIG-bench/blob/main/bigbench/benchmark_tasks/keywords_to_tasks.md">categorisation by keyword</a>.</p><p>A key challenge for such large-scale multi-task evaluation is accessibility. Tasks need to be available in a common input format so that they can be run easily. In addition, tasks should be efficient to run or alternatively infrastructure needs to be available to run tasks even without much compute.</p><p>Another point of consideration is that such a collection favours large general-purpose models, which are generally trained by deep-pocketed companies or institutions. Such models, however, are already used as the starting point for most current research efforts and can be—once trained—more efficiently used via <a href="https://ruder.io/recent-advances-lm-fine-tuning/#behavioural-fine-tuning">fine-tuning</a>, distillation, or pruning.</p><p><strong>Recommendations:</strong></p><ol><li>Consider collecting and evaluating on a large, diverse, versioned collection of NLP tasks.</li></ol><h2 id="conclusion">Conclusion</h2><p>In order to keep up with advances in modelling, we need to revisit many tacitly accepted benchmarking practices such as relying on simplistic metrics like F1-score and BLEU. To this end, we should take inspiration from real-world applications of language technology and consider the constraints and requirements that such settings pose for our models. We should also care more about the long tail of the distribution as that is where improvements will be observed for many applications. Lastly, we should be more rigorous in the evaluation on our models and rely on multiple metrics and statistical significance testing, contrary to <a href="https://aclanthology.org/2021.acl-long.566.pdf">current trends</a>.</p><h2 id="citation">Citation</h2><p>For attribution in academic contexts, please cite this work as:</p><pre><code>@misc{ruder2021benchmarking,
  author = {Ruder, Sebastian},
  title = {{Challenges and Opportunities in NLP Benchmarking}},
  year = {2021},
  howpublished = {\url{http://ruder.io/nlp-benchmarking}},
}</code></pre>
                </div>

<h2 id="citation">Newsletter</h2>

<style>
input {
  color: black;
}
</style>

If you want to receive regular updates about advances in machine learning and natural language processing, subscribe to <a href="https://newsletter.ruder.io/">my newsletter</a> below. 

<div id="revue-embed">
  <form action="https://newsletter.ruder.io/add_subscriber" method="post" id="revue-form" name="revue-form" $
  <div class="revue-form-group">
    <label for="member_email">Email address: </label>
    <input class="revue-form-field" placeholder="Your email address" type="email" name="member[email]" id="$
  </div>
  <div class="revue-form-group">
    <label for="member_first_name">First name <span class="optional">(Optional)</span>:</label>
    <input class="revue-form-field" placeholder="First name " type="text" name="member[first_name]" id="memb$
  </div>
  <div class="revue-form-group">
    <label for="member_last_name">Last name <span class="optional">(Optional)</span>:</label>
    <input class="revue-form-field" placeholder="Last name" type="text" name="member[last_name]" id="member$
  </div>
  <div class="revue-form-actions">
    <input type="submit" value="Subscribe" name="member[subscribe]" id="member_submit">
  </div>
  </form>
</div>

            </section>



        </article>

    </div>
</main>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = '/nlp-benchmarking/';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = "ghost-6116d6eaa1fdd895bf988b19"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://EXAMPLE.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card">
                    <header class="read-next-card-header">
                        <h3><span>More in</span> <a href="../tag/natural-language-processing/index.html">natural language processing</a></h3>
                    </header>
                    <div class="read-next-card-content">
                        <ul>
                            <li>
                                <h4><a href="../recent-advances-lm-fine-tuning/index.html">Recent Advances in Language Model Fine-tuning</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2021-02-24">24 Feb 2021</time> –
                                        13 min read</p>
                                </div>
                            </li>
                            <li>
                                <h4><a href="../research-highlights-2020/index.html">ML and NLP Research Highlights of 2020</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2021-01-19">19 Jan 2021</time> –
                                        15 min read</p>
                                </div>
                            </li>
                            <li>
                                <h4><a href="../nlp-beyond-english/index.html">Why You Should Do NLP Beyond English</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2020-08-01">1 Aug 2020</time> –
                                        7 min read</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="../tag/natural-language-processing/index.html">See all 31 posts
                            →</a>
                    </footer>
                </article>


                <article class="post-card post tag-language-models tag-natural-language-processing tag-transfer-learning ">

    <a class="post-card-image-link" href="../recent-advances-lm-fine-tuning/index.html">
        <img class="post-card-image"
            srcset="../content/images/size/w300/2021/02/fine-tuning_methods.png 300w,
                   ../content/images/size/w600/2021/02/fine-tuning_methods.png 600w,
                  ../content/images/size/w1000/2021/02/fine-tuning_methods.png 1000w,
                 ../content/images/size/w2000/2021/02/fine-tuning_methods.png 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="../content/images/size/w600/2021/02/fine-tuning_methods.png"
            alt="Recent Advances in Language Model Fine-tuning"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../recent-advances-lm-fine-tuning/index.html">

            <header class="post-card-header">
                    <div class="post-card-primary-tag">language models</div>
                <h2 class="post-card-title">Recent Advances in Language Model Fine-tuning</h2>
            </header>

            <section class="post-card-excerpt">
                    <p>This article provides an overview of recent methods to fine-tune large pre-trained language models.</p>
            </section>

        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
            
                    <div class="author-name-tooltip">
                        Sebastian Ruder
                    </div>
            
                    <a href="../author/sebastian/index.html" class="static-avatar">
                        <img class="author-profile-image" src="../content/images/size/w100/2019/02/new_profile_photo_square-1.jpg" alt="Sebastian Ruder" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="../author/sebastian/index.html">Sebastian Ruder</a></span>
                <span class="post-card-byline-date"><time datetime="2021-02-24">24 Feb 2021</time> <span class="bull">&bull;</span> 13 min read</span>
            </div>
        </footer>

    </div>

</article>
        </div>
    </div>
</aside>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://ruder.io">Sebastian Ruder</a> &copy; 2021</section>
                <nav class="site-footer-nav">
                    <a href="https://ruder.io">Latest Posts</a>
                    
                    <a href="https://twitter.com/seb_ruder" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="../assets/built/casper.js?v=eeb099b72b"></script>

    <script>
        // Parse the URL parameter
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Give the parameter a variable name
        var action = getParameterByName('action');

        $(document).ready(function () {
            if (action == 'subscribe') {
                $('body').addClass("subscribe-success");
            }

            $('.subscribe-success-message .subscribe-close').click(function () {
                $('.subscribe-success-message').addClass('close');
            });

            // Reset form on opening subscrion overlay
            $('.subscribe-button').click(function() {
                $('.subscribe-overlay form').removeClass();
                $('.subscribe-email').val('');
            });
        });
    </script>

    <script>
    $(document).ready(function () {
        // FitVids - start
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // FitVids - end

        // Replace nav with title on scroll - start
        Casper.stickyNavTitle({
            navSelector: '.site-nav-main',
            titleSelector: '.post-full-title',
            activeClass: 'nav-post-title-active'
        });
        // Replace nav with title on scroll - end

        // Hover on avatar
        var hoverTimeout;
        $('.author-list-item').hover(function () {
            var $this = $(this);

            clearTimeout(hoverTimeout);

            $('.author-card').removeClass('hovered');
            $(this).children('.author-card').addClass('hovered');

        }, function () {
            var $this = $(this);

            hoverTimeout = setTimeout(function () {
                $this.children('.author-card').removeClass('hovered');
            }, 800);
        });
    });
</script>


    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.6/zepto.min.js"></script>
<script>jQuery = Zepto</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism-coy.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-python.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-60512592-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-60512592-1');
</script>

</body>
</html>
